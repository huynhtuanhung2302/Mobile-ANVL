# Product Brief: ANVL Mobile - Giáº£i phÃ¡p An ninh TÃ¡c chiáº¿n

## 1. Tá»•ng quan Sáº£n pháº©m
ANVL Mobile lÃ  á»©ng dá»¥ng di Ä‘á»™ng dÃ nh cho nhÃ¢n viÃªn an ninh hiá»‡n trÆ°á»ng, Ä‘Ã³ng vai trÃ² lÃ  má»™t "Trung tÃ¢m chá»‰ huy di Ä‘á»™ng" (Mobile Command Center). á»¨ng dá»¥ng giÃºp tiáº¿p nháº­n, xá»­ lÃ½ Sá»± vá»¥ kháº©n cáº¥p vÃ  thá»±c hiá»‡n cÃ¡c nhiá»‡m vá»¥ tuáº§n tra má»™t cÃ¡ch chuyÃªn nghiá»‡p, nhanh chÃ³ng vÃ  chÃ­nh xÃ¡c.

## 2. CÃ¡c TÃ­nh nÄƒng Cá»‘t lÃµi (Hiá»‡n há»¯u)

### ğŸ“Š Dashboard & Quáº£n lÃ½ TÃ¡c chiáº¿n
- **Bá»™ 4 Widget Tráº¡ng thÃ¡i**: Theo dÃµi thá»i gian thá»±c sá»‘ lÆ°á»£ng cáº£nh bÃ¡o theo 4 tráº¡ng thÃ¡i: *Chá» tiáº¿p nháº­n*, *ÄÃ£ tiáº¿p nháº­n*, *ÄÃ£ bÃ¡o cÃ¡o*, *Káº¿t thÃºc*.
- **Active Mission Banner**: Hiá»ƒn thá»‹ cÃ¡c nhiá»‡m vá»¥ Ä‘ang thá»±c hiá»‡n (RECEIVED) kÃ¨m bá»™ Ä‘áº¿m thá»i gian (Timer) cáº­p nháº­t tá»«ng giÃ¢y.
- **Patrol Hero Widget**:
    - **Æ¯u tiÃªn 3:** Chá»‰ hiá»ƒn thá»‹ lá»‹ch ngÃ y mai khi hÃ´m nay khÃ´ng cÃ²n lá»‹ch trÃ¬nh nÃ o cáº§n xá»­ lÃ½ (Trá»‘ng hoáº·c Ä‘Ã£ HoÃ n thÃ nh).
    - **áº¨n:** CÃ¡c ca Ä‘Ã£ HoÃ n thÃ nh trong ngÃ y hÃ´m nay sáº½ khÃ´ng xuáº¥t hiá»‡n trÃªn Dashboard.
    - **Äá»‹nh danh:** KhÃ´ng hiá»ƒn thá»‹ mÃ£ ID (R-XXX) trÃªn cÃ¡c tháº» táº¡i Dashboard.

### ğŸš¨ Há»‡ thá»‘ng Cáº£nh bÃ¡o & Xá»­ lÃ½ (Alerts Lifecycle)
- **VÃ²ng Ä‘á»i 4 tráº¡ng thÃ¡i**: Chuáº©n hÃ³a quy trÃ¬nh tá»« lÃºc tin má»›i Ä‘áº¿n (Chá» tiáº¿p nháº­n) -> Tiáº¿p nháº­n (RECEIVED) -> BÃ¡o cÃ¡o (REPORTED) -> Káº¿t thÃºc (FINISHED).
- **Tab Cáº£nh bÃ¡o**: Giao diá»‡n táº­p trung Ä‘á»ƒ quáº£n lÃ½ vÃ  lá»c cÃ¡c sá»± vá»¥ theo tráº¡ng thÃ¡i.

### ğŸ—ºï¸ Báº£n Ä‘á»“ & Dáº«n Ä‘Æ°á»ng (Map & Routing)
- **Há»— trá»£ Äa táº§ng (Indoor/Outdoor)**: Hiá»ƒn thá»‹ Floor Badge (Sá»‘ táº§ng) Neon Red Ä‘á»ƒ Ä‘á»‹nh vá»‹ chÃ­nh xÃ¡c trong tÃ²a nhÃ .
- **Layer Management**: Quáº£n lÃ½ hiá»ƒn thá»‹ cÃ¡c lá»›p thÃ´ng tin: Camera, Thiáº¿t bá»‹ IoT, TÃ²a nhÃ , Khu vá»±c.
- **Dáº«n Ä‘Æ°á»ng ká»¹ thuáº­t**: Váº½ lá»™ trÃ¬nh tá»« vá»‹ trÃ­ hiá»‡n táº¡i Ä‘áº¿n vá»‹ trÃ­ Sá»± vá»¥.

### ğŸ›¡ï¸ Tuáº§n tra & Pháº£n á»©ng hiá»‡n trÆ°á»ng (Patrol & Reporting)
- **Lá»‹ch trÃ¬nh Äa ngÃ y (Multi-day)**: Thanh Date Strip giÃºp duyá»‡t káº¿ hoáº¡ch cÃ´ng tÃ¡c theo tuáº§n.
- **Quáº£n lÃ½ Tráº¡ng thÃ¡i Ä‘a sáº¯c**: PhÃ¢n loáº¡i trá»±c quan (Cam, Xanh dÆ°Æ¡ng, Xanh lÃ¡) kÃ¨m bá»™ Ä‘áº¿m sá»‘ lÆ°á»£ng thá»±c táº¿.
- **Start Behavior Tracking**: NÃºt "Báº®T Äáº¦U" giÃºp ghi nháº­n thá»i Ä‘iá»ƒm thá»±c thi vÃ  cáº£nh bÃ¡o "Báº¯t Ä‘áº§u muá»™n" tá»± Ä‘á»™ng.
- **BÃ¡o cÃ¡o & Lá»‹ch sá»­**:
    - MÃ n hÃ¬nh **TÃ³m táº¯t Lá»‹ch sá»­**: Xem láº¡i káº¿t quáº£, quÃ£ng Ä‘Æ°á»ng vÃ  xÃ¡c nháº­n GPS cá»§a cÃ¡c ca Ä‘Ã£ xong.
    - **Tá»•ng há»£p Sá»± cá»‘**: Quáº£n lÃ½ danh sÃ¡ch cÃ¡c báº¥t thÆ°á»ng Ä‘Ã£ ghi nháº­n trong tá»«ng ca trá»±c.
- **Pháº£n á»©ng linh hoáº¡t**: Cho phÃ©p bÃ¡o cÃ¡o sá»± cá»‘ phÃ¡t sinh ngay trong khi Ä‘ang xem lá»™ trÃ¬nh tuáº§n tra.
- **Navigation Payload:**
    - `patrol.tsx` -> `patrol-details.tsx`: `{ routeId, routeName }`.
    - `patrol.tsx` -> `patrol-report.tsx`: `{ routeId, routeName }` (Há»— trá»£ cáº£ HoÃ n thÃ nh & ÄÃ£ bÃ¡o cÃ¡o).
    - `patrol-report.tsx` -> `patrol-incidents-summary.tsx`: `{ routeName }`.
    - `patrol-details.tsx` -> `patrol-report.tsx`: `{ routeId, distance, updates, incidents, duration }`.
- BÃ¡o cÃ¡o hÆ° há»ng thiáº¿t bá»‹ (QR Code support) cho háº¡ táº§ng ká»¹ thuáº­t.
- Äá»“ng bá»™ 100% Online vá»›i trung tÃ¢m chá»‰ huy (TTCH).

### ğŸ†˜ SOS & An toÃ n (Security Features)
- **Global SOS**: NÃºt nháº¥n giá»¯ 3 giÃ¢y Ä‘á»ƒ gá»­i tÃ­n hiá»‡u kháº©n cáº¥p toÃ n cá»¥c.
- **Hotline Chá»‰ huy**: Truy cáº­p nhanh Ä‘á»ƒ gá»i Ä‘iá»‡n trá»±c tiáº¿p vá» trung tÃ¢m.

## 3. Há»‡ thá»‘ng Thiáº¿t káº¿ (Design System)
- **NgÃ´n ngá»¯**: Tactical Dark Mode (Deep Black & Neon Accents).
- **MÃ u sáº¯c TÃ¡c chiáº¿n**: 
  - Red (#FF3B30): Kháº©n cáº¥p.
  - Orange (#FF9500): ChÃº Ã½.
  - Cyan (#00F2FF): Dáº«n Ä‘Æ°á»ng.
  - Green (#34C759): An toÃ n/HoÃ n thÃ nh.
- **Tráº£i nghiá»‡m (UX)**: 
  - Pháº£n há»“i xÃºc giÃ¡c (Haptics) & hiá»‡u á»©ng Pulse.
  - Tá»± Ä‘á»™ng chuyá»ƒn tab (Auto-switch) khi báº¯t Ä‘áº§u nhiá»‡m vá»¥.
  - Unified Briefing Card cho tráº£i nghiá»‡m tÃ¡c chiáº¿n táº­p trung.

## 4. SÆ¡ Ä‘á»“ Luá»“ng Nghiá»‡p vá»¥ (Flowchart)

```mermaid
graph TD
    Start(ğŸ“± á»¨NG Dá»¤NG ANVL MOBILE) --> Dash[ğŸ  Dashboard TÃ¡c chiáº¿n]

    Dash --> IncidentBranch{ğŸš¨ NHÃNH Sá»° Vá»¤<br/>Tá»« Web xuá»‘ng}
    IncidentBranch --> I1[1. Nháº­n tin MQTT]
    I1 --> I2[2. Xem Briefing]
    I2 --> I3[3. Báº¥m Tiáº¿p nháº­n]
    I3 --> I4[4. Dáº«n Ä‘Æ°á»ng Báº£n Ä‘á»“]
    I4 --> I5[5. BÃ¡o cÃ¡o xá»­ lÃ½ Sá»± vá»¥]
    I5 --> I6[6. Web Duyá»‡t & Káº¿t thÃºc]

    Dash --> PatrolBranch{ğŸš¶ NHÃNH TUáº¦N TRA}
    PatrolBranch --> P1[1. Nháº­n Lá»‹ch tuáº§n tra]
    P1 --> P2[2. Thá»±c hiá»‡n Tuyáº¿n]
    P2 --> O1((BÃ¡o cÃ¡o Sá»± cá»‘ An ninh))
    P2 --> O2((BÃ¡o cÃ¡o Sá»± cá»‘ Háº¡ táº§ng - QR))
    O1 & O2 --> P2
    P2 --> P3[3. HoÃ n thÃ nh Lá»™ trÃ¬nh]
    P3 --> P4[4. Tá»•ng káº¿t & ÄÃ³ng ca]
    P4 --> P5[5. Lá»‹ch sá»­ & Äá»‘i soÃ¡t]
```

## 5. Luá»“ng NgÆ°á»i dÃ¹ng Trá»ng tÃ¢m
1.  **Xá»­ lÃ½ Sá»± vá»¥**: Dashboard -> Nháº­n tin bÃ¡o -> Báº£n Ä‘á»“ dáº«n Ä‘Æ°á»ng Ä‘áº¿n Sá»± vá»¥ -> Hiá»‡n trÆ°á»ng -> BÃ¡o cÃ¡o xá»­ lÃ½ Sá»± vá»¥ -> HoÃ n táº¥t.
2.  **Tuáº§n tra**: Dashboard -> Chi tiáº¿t Tuyáº¿n -> Theo dÃµi lá»™ trÃ¬nh trÃªn báº£n Ä‘á»“ -> BÃ¡o cÃ¡o Sá»± cá»‘ (náº¿u cÃ³) -> Káº¿t thÃºc ca & Tá»•ng káº¿t.

## 5. Tráº¡ng thÃ¡i Hiá»‡n táº¡i (MVP Status)
- ToÃ n bá»™ ná»™i dung táº­p trung vÃ o cháº¿ Ä‘á»™ **Online**.
- CÃ¡c tÃ­nh nÄƒng nÃ¢ng cao (Offline, Quáº£n lÃ½ Ticket, Check-in NFC, Biometrics) Ä‘Æ°á»£c chuyá»ƒn sang tÃ i liá»‡u dá»± phÃ²ng.
- Xem chi tiáº¿t táº¡i: **[Future Scope](./future-scope.md)**
